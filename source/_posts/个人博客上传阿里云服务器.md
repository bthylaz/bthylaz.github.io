---
title: hexo博客部署到阿里云服务器
date: 2021-08-09 09:47:40
tags:
description: 记录hexo博客部署到阿里云服务器的过程
# sticky: 1
cover: ../img/4.png
# copyright: false
---

# hexo博客部署到阿里云服务器

### 说明

前几天把个人博客搭建好了，高兴之余耐不住性子想把博客上传到阿里云服务器（前几个星期白嫖了两个月免费的，想着不用白不用，嘿嘿~~~），查看了很多教程，也看了很多视频，踩了不少坑，现在记录记录。

本篇博客借鉴了这两位大佬的： [https://www.fuchenchenle.cn/2020/08/18/hexo%E9%83%A8%E7%BD%B2%E8%85%BE%E8%AE%AF%E4%BA%91/](https://www.fuchenchenle.cn/2020/08/18/hexo部署腾讯云/) 和 https://lneverl.gitee.io/posts/2092ec56.html 

这是我的博客链接： http://120.79.134.80/  ，用hexo+butterfly搭建的，欢迎访问

---

### 前提准备:

- 本地已经搭建好了个人博客，本地安装并初始化过git,有nodejs
- 拥有云服务器（是在校学生的，这边建议跟我一样去白嫖两个月的服务器）

- 有了这些条件后，就开始啦！

---

### 云服务器配置Git

1.安装依赖库

```
yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel 
```

2.安装编译工具

```
yum install gcc perl-ExtUtils-MakeMaker package
```

3.查看git的版本y

```
git version
```

4.删除git

```
yum remove git -y
```

5.下载解压最新版

```
cd /usr/local/src    #下载的目录
wget https://www.kernel.org/pub/software/scm/git/git-2.28.0.tar.gz    #下载最新版
tar -zxvf git-2.28.0.tar.gz        #解压到当前文件夹
```

6.编辑并安装

```
cd git-2.28.0    #进入文件夹
make prefix=/usr/local/git all    #编译源码
make prefix=/usr/local/git install    #安装路径
```

7.配置git的环境变量

```
echo 'export PATH=$PATH:/usr/local/git/bin' >> /etc/bashrc
```

8.刷新环境变量

```
source /etc/bashrc
```

9. 查看版本号

```
git --version
```

10. 创建git用户并且修改权限

```
adduser fuchen
passwd fuchen
chmod 740 /etc/sudoers
vim /etc/sudoers

root    ALL=(ALL)       ALL
fuchen     ALL=(ALL)       ALL
```

![在这里插入图片描述](https://img-blog.csdnimg.cn/f15c88f37baf47c8adca89a906f55c6b.png)


11.本地windows10使用Gitbash创建密钥

```
ssh-keygen -t rsa
```

创建的时候一直按确定就可以了



12.将本地创建id_rsa.pub中文件复制

```
su fuchen
mkdir ~/.ssh
vim ~/.ssh/authorized_keys
```

13.本地测试

```
ssh -v fuchen@服务器ip
```

### 云服务器网站配置

1.创建网站目录并且设置权限

```
su root
mkdir /home/hexo
chown fuchen:fuchen -R /home/hexo
```

2.安装Nginx

```
yum install -y nginx
systemctl start nginx.service    #启动服务
```

这步我的阿里云服务器终端报错，我用了下面的方法：下载压缩包然后解压下载

3. 安装nginx

**安装nginx一定要在local文件夹下**

```
cd /usr/local/
wget http://nginx.org/download/nginx-1.17.9.tar.gztar -xvf
nginx-1.17.9.tar.gzcd nginx-1.17.9
./configure
make && make install
```

结果如图所示：

![\[)(个人博客上传阿里云服务器.assets/1628593628781.png)\]](https://img-blog.csdnimg.cn/9e722ac95c5c481184431ce8ebc90789.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NjY2MjQ4,size_16,color_FFFFFF,t_70)


然后修改配置文件：

进入这个目录：![在这里插入图片描述](https://img-blog.csdnimg.cn/9e3f07e9b44249c7a651c23982d01f0e.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NjY2MjQ4,size_16,color_FFFFFF,t_70)


修改：![在这里插入图片描述](https://img-blog.csdnimg.cn/1ab9959775de40dc9f9ef26662323802.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NjY2MjQ4,size_16,color_FFFFFF,t_70)

server_name:是你的主机名

root:你博客的位置

4.重启服务器

```
/usr/local/nginx/sbin/nginx
```

也可以去 /usr/local/nginx/sbin/   目录下直接 nginx 启动。但是这样未免太麻烦了。于是，我们也可以创建一个软链接： ln  -s    /usr/local/nginx/sbin/nginx     /usr/sbin/nginx       ，这样，无论我们到了哪个位置，都可以直接 nginx 启动。然后停止的话，可以用   nginx  -s  stop 。

![\[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-ThSeF40D-1628596709254)(个人博客上传阿里云服务器.assets/1628594016684.png)\]](https://img-blog.csdnimg.cn/8acc81a4285c45db9e7797dc11734bf2.png)


这个部分来自： [https://xie1997.blog.csdn.net/article/details/82782309?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-2.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-2.control](https://xie1997.blog.csdn.net/article/details/82782309?utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-2.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-2.control) 

访问服务器，看到下列页面，说明nginx搭建成功

![](https://img-blog.csdnimg.cn/43a4dd4f610e4356a42d7dc95ec21789.png)


### 安装Node.js

1.

```
curl -sL https://rpm.nodesource.com/setup_10.x | bash -yum install -y nodejs
```

2.查看是否成功

```
node -v
npm -v
```

可以显示版本号即为成功

3.建立git仓库

```
su root
cd /home/fuchen
git init --bare blog.git
chown fuchen:fuchen -R blog.git
```

4.同步网站根目录

```
vim blog.git/hooks/post-receive

#!/bin/sh
git --work-tree=/home/hexo --git-dir=/home/fuchen/blog.git checkout -f
```

5.修改权限

```
chmod +x /home/fuchen/blog.git/hooks/post-receive
```

6.在windows10本地hexo目录修改_config.yml文件

```
deploy:
  type: git
  repository: fuchen@49.232.59.235:/home/fuchen/blog.git    #用户名@服务器Ip:git仓库位置
  branch: master
```



7.在本机gitbash部署

```
hexo clean
hexo g -d
```



一顿操作下来，博客也已经部署成功了，这篇文章如果觉得不太清晰的话，推荐你们去看看B站的视频，大佬如云~


